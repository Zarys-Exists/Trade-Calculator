/* Minimal stylesheet for the FTF Trade Calculator UI
   Contains only selectors used by index.html and trade.js. Clean and valid CSS. */

/* Reset */
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  min-height: 100vh;
  font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  background: linear-gradient(135deg, #27004a 0%, #1a0033 100%);
  color: #fff;
  display: flex;
  justify-content: center;
  padding: 1rem;
}

.site-header { width: 100%; max-width: 1200px; margin-bottom: 1rem; display:flex; align-items:center; }
.site-title { font-size: 1.4rem; font-weight: 600; }

.trade-page-container {
  width: 100%; max-width: 1100px;
  background: linear-gradient(160deg,#400078 0%,#2d0054 100%);
  border-radius: 12px; padding: 1rem 1.25rem; box-shadow: 0 8px 32px rgba(0,0,0,0.25);
}

/* WFL Bar */
.wfl-bar-wrapper { width: 100%; margin-bottom: 1rem; }
.wfl-bar-labels { display:flex; justify-content:center; gap:2rem; margin-bottom:0.5rem; }
.wfl-bar-track { width:100%; height:10px; background:rgba(0,0,0,0.25); border-radius:6px; position:relative; overflow:hidden; }
.wfl-bar-track::after { content: ''; position:absolute; left:50%; top:0; height:100%; width:1px; background: rgba(255,255,255,0.12); }
#wfl-bar-fill { position:absolute; left:0; top:0; height:100%; width:50%; transition: width .3s ease; }
.wfl-bar-fill.active { background: linear-gradient(90deg,#6a1ee0,#8a2be2); }

/* Layout */
.trade-layout { display:flex; gap:1rem; align-items:flex-start; justify-content:space-between; }
.offer-container { flex:1; max-width:360px; display:flex; flex-direction:column; align-items:center; padding:0.5rem; }
.offer-container h2 { font-size:1rem; margin-bottom:0.5rem; }

/* 3x3 trade grid */
.trade-grid {
  display:grid; grid-template-columns:repeat(3,1fr); grid-template-rows:repeat(3,1fr);
  gap:8px; width:100%; max-width:360px; aspect-ratio:1/1; background: rgba(0,0,0,0.12);
  border-radius:8px; padding:8px; border:1px solid rgba(255,255,255,0.04);
}

.item-slot { background: rgba(0,0,0,0.25); border-radius:6px; display:flex; align-items:center; justify-content:center; padding:6px; position:relative; cursor:pointer; }
.item-slot[data-shg]::before { content: attr(data-shg); position:absolute; top:6px; right:6px; font-size:11px; background:#6a1ee0; padding:2px 6px; border-radius:4px; }
.item-slot-img { width:70%; height:70%; display:flex; align-items:center; justify-content:center; }
.item-slot-img img { max-width:100%; max-height:100%; object-fit:contain; }
.item-slot-name { font-size:0.75rem; margin-top:4px; text-align:center; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.item-slot:hover { background: rgba(255,255,255,0.06); }
.item-slot.filled { border:1px solid rgba(138,43,226,0.6); }

.total-value { font-weight:700; font-size:1.4rem; margin-top:0.75rem; }

.wfl-container { display:flex; flex-direction:column; align-items:center; gap:0.5rem; padding:0 0.5rem; }
#wfl-result { font-size:1.6rem; font-weight:700; }
.wfl-result-win { color:#00eb37 }
.wfl-result-fair { color:#fff }
.wfl-result-lose { color:#e14b4b }

#reset-trade-btn { background:#6a1ee0; color:#fff; border:none; padding:0.45rem 0.75rem; border-radius:6px; cursor:pointer; }

/* Modal */
.modal-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.65); display:none; align-items:center; justify-content:center; z-index:1000; }
.modal-content { width:92%; max-width:900px; height:80vh; background:linear-gradient(160deg,#400078,#2d0054); border-radius:10px; padding:1rem; display:flex; flex-direction:column; }
.close-modal { position:absolute; top:12px; right:18px; font-size:1.6rem; cursor:pointer; }
.modal-body { display:flex; gap:1rem; flex:1; overflow:hidden; }

.rarity-sidebar { width:120px; display:flex; flex-direction:column; gap:8px; }
.rarity-filter-btn { background:rgba(0,0,0,0.2); color:#fff; border:1px solid rgba(255,255,255,0.06); padding:8px; border-radius:6px; cursor:pointer; }
.rarity-filter-btn.active { background:linear-gradient(90deg,#6a1ee0,#8a2be2); border-color:transparent; }

.shg-buttons { display:flex; gap:8px; margin-top:8px; }
.shg-btn { width:40px; height:36px; display:inline-flex; align-items:center; justify-content:center; background:rgba(0,0,0,0.2); border:1px solid rgba(255,255,255,0.06); color:#fff; border-radius:6px; cursor:pointer; font-weight:700; }
.shg-btn.active { background:linear-gradient(90deg,#6a1ee0,#8a2be2); border-color:transparent; }

.item-display-area { flex:1; display:flex; flex-direction:column; }
#item-search { padding:8px; border-radius:6px; border:1px solid rgba(255,255,255,0.06); background:rgba(0,0,0,0.12); color:#fff; margin-bottom:8px; }
.item-list { display:grid; grid-template-columns:repeat(auto-fill,minmax(90px,1fr)); gap:8px; overflow:auto; padding:4px; }
.modal-item { background:rgba(0,0,0,0.2); border-radius:6px; padding:8px; display:flex; flex-direction:column; align-items:center; justify-content:center; cursor:pointer; border:1px solid rgba(255,255,255,0.04); }
.modal-item-img { width:70%; height:70%; display:flex; align-items:center; justify-content:center; }
.modal-item-img img { max-width:100%; max-height:100%; object-fit:contain; }
.modal-item-name { font-size:0.8rem; text-align:center; margin-top:6px; }

/* Small utilities used in the app (progress/loading) */
.progress-container { width:100%; margin:16px auto; padding:8px; text-align:center; opacity:0; transition: opacity .3s ease; }
.progress-container.show { opacity:1; }
.progress-bar { width:100%; height:8px; background: rgba(128,0,128,0.2); border-radius:4px; overflow:hidden; position:relative; margin:8px 0; }
.progress-fill { height:100%; width:0; background: linear-gradient(90deg,#6000aa,#8200fc); border-radius:4px; transition: width .2s ease; }
@keyframes shimmer { 0% { background-position:0 0; } 100% { background-position:30px 0; } }
.progress-text, .loading-message { color:#fff; text-align:center; font-size:14px; }

.add-item-button { background: rgba(106,30,224,0.08); border-radius:6px; padding:6px 8px; cursor:pointer; }
.add-item-button:hover { background:#6a1ee0; color:#fff; }

@media (max-width: 900px) {
  .trade-layout { flex-direction: column; align-items:center; }
  .offer-container { max-width:520px; }
}

/* small helper */
.single-line { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.item-slot:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

.item-slot.filled {
    border: 1px solid #8a2be2;
    font-weight: 500;
}

.total-value {
    color: #fff;
    font-size: 2.5rem;
    font-weight: 700;
    position: absolute;
    top: -5.5rem;
    min-width: 200px; /* Ensure there's enough room for the value */
}

/* Position for left offer (your offer) */
.offer-container:first-child .total-value {
    left: 0;
    text-align: left;
}

/* Position for right offer (their offer) */
.offer-container:last-child .total-value {
    right: 0;
    text-align: right /* Right align the text */
}

    /* ID-specific overrides to guarantee alignment (highest specificity) */
#their-total {
    right: 0 !important;
    text-align: right !important;
}


.wfl-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    align-self: center;
    padding: 0 1rem; /* Reduced */
}

/* FV/HV slider (bottom-right of trade container) */
.fv-hv-switch {
    position: absolute;
    right: 1rem;
    bottom: -0.5rem;  /* Instead of top: 23.5rem */
    display: flex;
    align-items: center;
    gap: 0.5rem;
    z-index: 100;
}
.fv-hv-switch .label {
    color: #fff;
    font-weight: 600;
    font-size: 0.9rem;
}
.fv-hv-toggle {
    /* Larger and responsive using rems */
    --width: 8.5rem;   /* wider for visibility */
    --height: 2.4rem;  /* slightly taller */
    width: var(--width);
    height: var(--height);
    background: rgba(0,0,0,0.18);
    border: 2px solid #6400c1;
    border-radius: 999px;
    position: relative;
    display: flex;
    align-items: center;
    padding: 0.3rem;
    cursor: pointer;
    transition: background 0.2s ease, border-color 0.2s ease;
}
.fv-hv-toggle .option {
    flex: 1 1 50%;
    text-align: center;
    color: #ccc;
    font-weight: 700;
    font-size: 0.95rem; /* slightly larger for readability */
    pointer-events: none;
}
.fv-hv-toggle .knob {
    position: absolute;
    width: calc(var(--width) / 2 - 0.6rem);
    height: calc(var(--height) - 0.6rem);
    background: linear-gradient(90deg, #6a1ee0, #8a2be2);
    border-radius: 999px;
    top: 0.3rem;
    left: 0.3rem;
    transition: left 0.18s cubic-bezier(.2,.9,.2,1);
    box-shadow: 0 4px 12px rgba(106,30,224,0.25);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 700;
}
.fv-hv-toggle.hv .knob { left: calc(50% + 0.3rem); }
.fv-hv-toggle.hv { border-color: #8a2be2; }
.fv-hv-toggle.hv .option { color: #fff; }

/* Make the toggle slightly smaller on very narrow screens */
@media (max-width: 420px) {
    .fv-hv-toggle {
        --width: 4.6rem; /* ~74px scaled down */
        --height: 1.8rem;
    }
    .fv-hv-switch { bottom: -0.25rem; right: 0.75rem; }
}

#wfl-result {
    font-size: 2rem;
    font-weight: 700;
    padding: 0.5rem 1rem;
    border-radius: 0.5rem;
    transition: all 0.3s ease;
    min-width: 8rem;
    text-align: center;
    height: auto; /* allow multiple lines */
    display: inline-block;
    line-height: 1.1; /* compact line height for stacked text */
    margin-bottom: 1rem;
}

.wfl-result-win { color: #00eb37; }
.wfl-result-fair { 
    display: none;  /* Hide by default */
    color: #ffffff;
}
/* Only show fair when difference is exactly 0 */
.wfl-result-fair[data-difference="0"] {
    display: block;
    color: #ffffff;
}
.wfl-result-lose { color: #e00016; }

.wfl-mode {
    display: block;
    font-size: 1em; /* match parent (#wfl-result) font-size */
    font-weight: 700;
    opacity: 0.95;
    margin-top: 0.1rem;
}

#reset-trade-btn {
    background: #6a1ee0;
    color: white;
    border: none;
    padding: 0.5rem 1rem; /* Reduced */
    border-radius: 0.5rem;
    cursor: pointer;
    font-size: 0.9rem; /* Reduced */
    transition: background-color 0.2s ease;
    width: 6rem;
}

#reset-trade-btn:hover {
    background: #5400b5;
}

/* Modal Styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    display: none; /* Hidden by default */
    align-items: center;
    justify-content: center;
    z-index: 2000;
}

.modal-content {
    background: linear-gradient(160deg, #400078 0%, #2d0054 100%);
    padding: 2rem;
    border-radius: 1rem;
    width: 90%;
    max-width: 60rem; /* Adjusted for new layout */
    height: 80vh;
    display: flex;
    flex-direction: column;
    position: relative;
    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
}

.close-modal {
    position: absolute;
    top: 1rem;
    right: 1.5rem;
    font-size: 2rem;
    color: #fff;
    cursor: pointer;
}

.modal-content h3 {
    color: #fff;
    text-align: center;
    margin-bottom: 1rem;
}

.modal-body {
    display: flex;
    gap: 1.5rem;
    flex-grow: 1;
    overflow: hidden;
    margin-top: 1rem;
}

.rarity-sidebar {
    flex: 0 0 10rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.rarity-filter-btn {
    background-color: rgba(0, 0, 0, 0.2);
    color: #fff;
    border: 1px solid #6400c1;
    padding: 0.75rem;
    border-radius: 0.5rem;
    cursor: pointer;
    text-align: center;
    font-size: 1rem;
    font-weight: 500;
    transition: all 0.2s ease;
}

.rarity-filter-btn:hover {
    background-color:hsl(267, 100%, 50%);
    border-color: #8a2be2;
}

.rarity-filter-btn.active {
    background-color: hsl(267, 100%, 50%);
    border-color: #8a2be2;
}

/* New buttons style */
.shg-buttons {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 0.75rem;
}

.shg-btn {
    background-color: rgba(0, 0, 0, 0.2);
    color: #fff;
    border: 1px solid #6400c1;
    padding: 0.5rem;
    border-radius: 0.5rem;
    cursor: pointer;
    text-align: center;
    font-size: 1rem;
    font-weight: 500;
    width: 3rem;
    height: 3rem;
    display: flex;
    align-items: center;
    justify-content: center;
}

.shg-btn:hover {
    background-color: #431686;
    border-color: #6a1ee0;
}

.shg-btn.active {
    background-color: hsl(267, 100%, 50%);
    border-color: #8a2be2;
}

.item-display-area {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}


#item-search {
    width: 100%;
    padding: 0.75rem;
    border-radius: 0.5rem;
    border: 2px solid #6400c1;
    background-color: rgba(0, 0, 0, 0.3);
    color: #fff;
    font-size: 1rem;
    margin-bottom: 1rem;
    outline: none;
}

#item-search:focus {
    border-color: #8a2be2;
    box-shadow: 0 0 0 2px rgba(138, 43, 226, 0.25);
}

.item-list {
    flex-grow: 1;
    overflow-y: auto;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(8rem, 1fr)); /* Grid of squares */
    gap: 0.75rem;
    padding: 0.25rem;
    scrollbar-width: thin;
    scrollbar-color: #6a1ee0 #2d0054;
}

.item-list::-webkit-scrollbar {
    width: 12px;
}

.item-list::-webkit-scrollbar-track {
    background: #2d0054;
    border-radius: 10px;
}

.item-list::-webkit-scrollbar-thumb {
    background-color: #6a1ee0;
    border-radius: 10px;
    border: 3px solid #2d0054;
}

.item-list::-webkit-scrollbar-thumb:hover {
    background-color: #8a2be2;
}

.modal-item {
    background-color: rgba(0, 0, 0, 0.2);
    color: #fff;
    border-radius: 0.5rem;
    cursor: pointer;
    text-align: center;
    transition: background-color 0.2s ease;
    border: 1px solid #6400c1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    aspect-ratio: 1 / 1;
    padding: 0.5rem;
    gap: 0.5rem;
}

.modal-item:hover {
    background: hsl(276, 100%, 44%)
}
.modal-item-img {
    width: 70%;
    height: 70%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-item-img img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.modal-item-name {
    font-size: 0.8rem;
    word-break: break-word;
    line-height: 1.2;
}

.guide-content {
    font-size: 1.5rem;
    padding: 2px;
    margin: 2px;
    color: #ffffff;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .trade-layout {
        flex-direction: column;
        align-items: center;
    }
    .wfl-container {
        order: -1; /* Move WFL result to the top on mobile */
        margin-bottom: 2rem;
    }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .trade-layout {
        flex-direction: column;
        align-items: center;
    }
    .wfl-container {
        order: -1; /* Move WFL result to the top on mobile */
        margin-bottom: 2rem;
    }
}



